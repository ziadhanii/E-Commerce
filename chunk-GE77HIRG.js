import{Oc as l,S as a,X as c}from"./chunk-NGFRSXTT.js";var s=class extends Error{};s.prototype.name="InvalidTokenError";function h(r){return decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let o=t.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function u(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return h(e)}catch{return atob(e)}}function p(r,e){if(typeof r!="string")throw new s("Invalid token specified: must be a string");e||(e={});let t=e.header===!0?0:1,o=r.split(".")[t];if(typeof o!="string")throw new s(`Invalid token specified: missing part #${t+1}`);let i;try{i=u(o)}catch(n){throw new s(`Invalid token specified: invalid base64 for part #${t+1} (${n.message})`)}try{return JSON.parse(i)}catch(n){throw new s(`Invalid token specified: invalid json for part #${t+1} (${n.message})`)}}var d=class r{constructor(e){this.http=e}userInformation;baseUrl="https://ecommerce.routemisr.com/api/v1/auth";register(e){return this.http.post(this.baseUrl+"/signup",e)}login(e){return this.http.post(this.baseUrl+"/signin",e)}getUserId(){return this.deCodeUserToken(),this.userInformation?.id||null}deCodeUserToken(){let e=localStorage.getItem("token");if(e!=null){let t=p(e);this.userInformation=t,console.log(t)}}signOut(){localStorage.removeItem("token"),this.userInformation=null}requestResetPassword(e){return this.http.post(this.baseUrl+"/forgotPasswords",{email:e})}verifyResetCode(e){return this.http.post(this.baseUrl+"/verifyResetCode",{resetCode:e})}resetPassword(e,t){return this.http.put(this.baseUrl+"/resetPassword",{email:e,newPassword:t})}static \u0275fac=function(t){return new(t||r)(c(l))};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};export{d as a};
