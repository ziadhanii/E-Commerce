import{a as w}from"./chunk-3JARHXXO.js";import{a as L,b as g,c as E,d as y,e as I,f as _,h as T,i as N,j as M,m as k}from"./chunk-JYMT2BJ4.js";import{i as b,j as F}from"./chunk-TLZ2ZCQ4.js";import{Bc as C,Cb as h,Db as c,Ic as S,Mb as s,Ob as x,Pa as a,Va as f,_a as v,db as p,ob as m,vb as o,wb as i,xb as d}from"./chunk-BLPEOKRJ.js";function D(e,r){e&1&&(o(0,"p"),s(1,"Email is required."),i())}function G(e,r){e&1&&(o(0,"p"),s(1,"Invalid email format."),i())}function P(e,r){if(e&1&&(o(0,"div",14),p(1,D,2,0,"p",15)(2,G,2,0,"p",15),i()),e&2){let t,n,l=c();a(),m("ngIf",(t=l.loginForm.get("email"))==null?null:t.hasError("required")),a(),m("ngIf",(n=l.loginForm.get("email"))==null?null:n.hasError("email"))}}function R(e,r){e&1&&(o(0,"p"),s(1,"Password is required."),i())}function A(e,r){e&1&&(o(0,"p"),s(1,"Password must be at least 8 characters."),i())}function j(e,r){if(e&1&&(o(0,"div",14),p(1,R,2,0,"p",15)(2,A,2,0,"p",15),i()),e&2){let t,n,l=c();a(),m("ngIf",(t=l.loginForm.get("password"))==null?null:t.hasError("required")),a(),m("ngIf",(n=l.loginForm.get("password"))==null?null:n.hasError("minlength"))}}function V(e,r){e&1&&d(0,"i",16)}function U(e,r){if(e&1&&(o(0,"p",17),d(1,"i",18),s(2),i()),e&2){let t=c();a(2),x(" ",t.errorMessage," ")}}var q=class e{constructor(r,t){this.authService=r;this.router=t}errorMessage="";isLoading=!1;loginForm=new I({email:new _("",[g.required,g.email]),password:new _("",[g.required,g.minLength(8)])});handleForm(){let r=this.loginForm.value;this.isLoading=!0,this.loginForm.valid&&this.authService.login(r).subscribe({next:t=>{t.message==="success"&&(localStorage.setItem("token",t.token),this.authService.deCodeUserToken(),this.isLoading=!1,this.router.navigate(["/home"]))},error:t=>{this.errorMessage=t.error.message,this.isLoading=!1}})}static \u0275fac=function(t){return new(t||e)(f(w),f(b))};static \u0275cmp=v({type:e,selectors:[["app-login"]],decls:22,vars:6,consts:[[1,"w-75","mx-auto","my-5","shadow","rounded","p-4","bg-main-light"],[1,"my-3","text-center"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["class","alert alert-danger p-1 mt-2",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"text-center","mt-4","d-flex","justify-content-between","align-items-center"],["type","submit",1,"btn","main-btn","btn-lg","w-100",3,"disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],["routerLink","/forget-password-auth",1,"link-primary"],["class","alert alert-danger text-center p-2 mt-3 rounded",4,"ngIf"],[1,"alert","alert-danger","p-1","mt-2"],[4,"ngIf"],[1,"fas","fa-spinner","fa-spin"],[1,"alert","alert-danger","text-center","p-2","mt-3","rounded"],[1,"fas","fa-exclamation-circle","me-2"]],template:function(t,n){if(t&1&&(o(0,"section",0)(1,"h1",1),s(2,"Login"),i(),o(3,"form",2),h("ngSubmit",function(){return n.handleForm()}),o(4,"div",3)(5,"label",4),s(6,"Email"),i(),d(7,"input",5),p(8,P,3,2,"div",6),i(),o(9,"div",3)(10,"label",7),s(11,"Password"),i(),d(12,"input",8),p(13,j,3,2,"div",6),i(),o(14,"div",9)(15,"button",10),s(16," Login "),o(17,"span"),p(18,V,1,0,"i",11),i()(),o(19,"a",12),s(20," Forget Password"),i()()(),p(21,U,3,1,"p",13),i()),t&2){let l,u;a(3),m("formGroup",n.loginForm),a(5),m("ngIf",((l=n.loginForm.get("email"))==null?null:l.invalid)&&((l=n.loginForm.get("email"))==null?null:l.touched)),a(5),m("ngIf",((u=n.loginForm.get("password"))==null?null:u.invalid)&&((u=n.loginForm.get("password"))==null?null:u.touched)),a(2),m("disabled",n.loginForm.invalid),a(3),m("ngIf",n.isLoading),a(3),m("ngIf",n.errorMessage)}},dependencies:[k,T,L,E,y,N,M,S,C,F],encapsulation:2})};export{q as LoginComponent};
