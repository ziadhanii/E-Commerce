import{a as b,c as C,d as g,e as S,f as l,h as x,i as w,j as I,k as M,m as E}from"./chunk-LE4QMA67.js";import{l as F}from"./chunk-V663ZQKE.js";import{a as y}from"./chunk-MHDMHZ4C.js";import{g as f,i as v}from"./chunk-K5OTZUKN.js";import{Cb as u,Ic as h,Mb as o,Pa as s,Va as n,_a as p,ob as d,vb as i,wb as r,xb as m}from"./chunk-NGFRSXTT.js";var N=class c{constructor(t,e,a,R){this.activatedRoute=t;this.cartService=e;this.toast=a;this.router=R}cartId="";paymentMethod="";ngOnInit(){this.activatedRoute.paramMap.subscribe({next:t=>{this.cartId=t.get("id"),console.log(this.cartId,"cartId")}}),this.activatedRoute.queryParamMap.subscribe(t=>{this.paymentMethod=t.get("paymentMethod"),console.log("Payment Method:",this.paymentMethod)})}orderForm=new S({detail:new l(""),phone:new l(""),city:new l("")});handleForm(){if(!this.cartId){console.error("Cart ID is missing");return}let t=this.orderForm.value;this.paymentMethod==="card"?this.cartService.checkOut(this.cartId,t).subscribe({next:e=>{console.log("Card Payment:",e),e.status==="success"&&(window.open(e.session.url,"_self"),this.cartService.cartNumber.next(0))},error:e=>console.error("Error during card payment:",e)}):this.paymentMethod==="cash"?this.cartService.checkOutCash(this.cartId,t).subscribe({next:e=>{console.log("Cash Payment:",e),this.cartService.cartNumber.next(0),this.router.navigate(["/allorders"]),this.toast.success("Your cash order has been placed successfully!")},error:e=>console.error("Error during cash payment:",e)}):console.error("Invalid payment method:",this.paymentMethod)}static \u0275fac=function(e){return new(e||c)(n(f),n(y),n(F),n(v))};static \u0275cmp=p({type:c,selectors:[["app-payment"]],decls:20,vars:2,consts:[[1,"container","py-5"],[1,"w-100","w-md-75","mx-auto","rounded","shadow-sm","p-4","bg-white"],[1,"mb-4","text-main","fw-bold"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","details",1,"form-label","fw-medium"],["type","text","id","details","formControlName","details","placeholder","Enter order details","required","",1,"form-control","rounded-pill","px-3"],["for","phone",1,"form-label","fw-medium"],["type","tel","id","phone","formControlName","phone","placeholder","Enter phone number","required","",1,"form-control","rounded-pill","px-3"],["for","city",1,"form-label","fw-medium"],["type","text","id","city","formControlName","city","placeholder","Enter your city","required","",1,"form-control","rounded-pill","px-3"],[1,"text-center"],["type","submit",1,"btn","main-btn","w-100","rounded-pill","px-5","py-2","text-main","fw-bold",3,"disabled"]],template:function(e,a){e&1&&(i(0,"section",0)(1,"div",1)(2,"h2",2),o(3,"Chech Out Details"),r(),i(4,"form",3),u("ngSubmit",function(){return a.handleForm()}),i(5,"div",4)(6,"label",5),o(7,"Details"),r(),m(8,"input",6),r(),i(9,"div",4)(10,"label",7),o(11,"Phone"),r(),m(12,"input",8),r(),i(13,"div",4)(14,"label",9),o(15,"City"),r(),m(16,"input",10),r(),i(17,"div",11)(18,"button",12),o(19," Check Out "),r()()()()()),e&2&&(s(4),d("formGroup",a.orderForm),s(14),d("disabled",a.orderForm.invalid))},dependencies:[h,E,x,b,C,g,M,w,I],encapsulation:2})};export{N as PaymentComponent};
